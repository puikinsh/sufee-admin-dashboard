{"version":3,"file":"datatable-Dxw1U61j.js","sources":["../../src/scripts/components/datatable.js"],"sourcesContent":["// DataTable Component - Vanilla JS replacement for jQuery DataTables\n\nexport class DataTable {\n  constructor(table, options = {}) {\n    this.table = typeof table === 'string' ? document.querySelector(table) : table;\n    this.options = {\n      sortable: true,\n      searchable: true,\n      pagination: true,\n      pageSize: 10,\n      ...options\n    };\n\n    this.data = [];\n    this.filteredData = [];\n    this.currentPage = 1;\n    this.sortColumn = null;\n    this.sortDirection = 'asc';\n\n    if (this.table) {\n      this.init();\n    }\n  }\n\n  init() {\n    this.extractData();\n    this.createWrapper();\n    this.createControls();\n    this.render();\n    this.setupEventListeners();\n  }\n\n  extractData() {\n    const rows = this.table.querySelectorAll('tbody tr');\n    this.data = Array.from(rows).map(row => {\n      const cells = row.querySelectorAll('td');\n      return Array.from(cells).map(cell => cell.innerHTML);\n    });\n    this.filteredData = [...this.data];\n  }\n\n  createWrapper() {\n    const wrapper = document.createElement('div');\n    wrapper.className = 'datatable-wrapper';\n    wrapper.innerHTML = `\n      <div class=\"datatable-top\">\n        ${this.options.searchable ? '<div class=\"datatable-search\"><input type=\"text\" placeholder=\"Search...\" class=\"form-control\"></div>' : ''}\n      </div>\n      <div class=\"datatable-container\"></div>\n      ${this.options.pagination ? '<div class=\"datatable-bottom\"><div class=\"datatable-info\"></div><div class=\"datatable-pagination\"></div></div>' : ''}\n    `;\n\n    this.table.parentNode.insertBefore(wrapper, this.table);\n    wrapper.querySelector('.datatable-container').appendChild(this.table);\n    this.wrapper = wrapper;\n  }\n\n  createControls() {\n    if (this.options.searchable) {\n      this.searchInput = this.wrapper.querySelector('.datatable-search input');\n    }\n\n    if (this.options.pagination) {\n      this.infoElement = this.wrapper.querySelector('.datatable-info');\n      this.paginationElement = this.wrapper.querySelector('.datatable-pagination');\n    }\n  }\n\n  setupEventListeners() {\n    // Search functionality\n    if (this.searchInput) {\n      this.searchInput.addEventListener('input', e => {\n        this.search(e.target.value);\n      });\n    }\n\n    // Sorting functionality\n    if (this.options.sortable) {\n      const headers = this.table.querySelectorAll('thead th');\n      headers.forEach((header, index) => {\n        header.style.cursor = 'pointer';\n        header.addEventListener('click', () => {\n          this.sort(index);\n        });\n      });\n    }\n  }\n\n  search(query) {\n    if (!query) {\n      this.filteredData = [...this.data];\n    } else {\n      this.filteredData = this.data.filter(row =>\n        row.some(cell => cell.toLowerCase().includes(query.toLowerCase()))\n      );\n    }\n\n    this.currentPage = 1;\n    this.render();\n  }\n\n  sort(columnIndex) {\n    if (this.sortColumn === columnIndex) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortColumn = columnIndex;\n      this.sortDirection = 'asc';\n    }\n\n    this.filteredData.sort((a, b) => {\n      const aVal = a[columnIndex];\n      const bVal = b[columnIndex];\n\n      // Try to parse as numbers\n      const aNum = parseFloat(aVal.replace(/[^0-9.-]/g, ''));\n      const bNum = parseFloat(bVal.replace(/[^0-9.-]/g, ''));\n\n      let comparison = 0;\n      if (!isNaN(aNum) && !isNaN(bNum)) {\n        comparison = aNum - bNum;\n      } else {\n        comparison = aVal.localeCompare(bVal);\n      }\n\n      return this.sortDirection === 'asc' ? comparison : -comparison;\n    });\n\n    this.updateSortIndicators();\n    this.render();\n  }\n\n  updateSortIndicators() {\n    const headers = this.table.querySelectorAll('thead th');\n    headers.forEach((header, index) => {\n      header.classList.remove('sort-asc', 'sort-desc');\n      if (index === this.sortColumn) {\n        header.classList.add(`sort-${this.sortDirection}`);\n      }\n    });\n  }\n\n  render() {\n    this.renderTable();\n    if (this.options.pagination) {\n      this.renderPagination();\n      this.renderInfo();\n    }\n  }\n\n  renderTable() {\n    const tbody = this.table.querySelector('tbody');\n    const startIndex = (this.currentPage - 1) * this.options.pageSize;\n    const endIndex = startIndex + this.options.pageSize;\n    const pageData = this.options.pagination\n      ? this.filteredData.slice(startIndex, endIndex)\n      : this.filteredData;\n\n    tbody.innerHTML = pageData\n      .map(row => `<tr>${row.map(cell => `<td>${cell}</td>`).join('')}</tr>`)\n      .join('');\n  }\n\n  renderPagination() {\n    const totalPages = Math.ceil(this.filteredData.length / this.options.pageSize);\n\n    if (totalPages <= 1) {\n      this.paginationElement.innerHTML = '';\n      return;\n    }\n\n    const pagination = document.createElement('nav');\n    pagination.innerHTML = `\n      <ul class=\"pagination\">\n        <li class=\"page-item ${this.currentPage === 1 ? 'disabled' : ''}\">\n          <a class=\"page-link\" href=\"#\" data-page=\"prev\">Previous</a>\n        </li>\n        ${Array.from({ length: totalPages }, (_, i) => i + 1)\n          .filter(page => this.shouldShowPage(page, totalPages))\n          .map(\n            page => `\n            <li class=\"page-item ${page === this.currentPage ? 'active' : ''}\">\n              <a class=\"page-link\" href=\"#\" data-page=\"${page}\">${page}</a>\n            </li>\n          `\n          )\n          .join('')}\n        <li class=\"page-item ${this.currentPage === totalPages ? 'disabled' : ''}\">\n          <a class=\"page-link\" href=\"#\" data-page=\"next\">Next</a>\n        </li>\n      </ul>\n    `;\n\n    // Add event listeners to pagination links\n    pagination.addEventListener('click', e => {\n      e.preventDefault();\n      const page = e.target.dataset.page;\n\n      if (page === 'prev' && this.currentPage > 1) {\n        this.currentPage--;\n      } else if (page === 'next' && this.currentPage < totalPages) {\n        this.currentPage++;\n      } else if (!isNaN(page)) {\n        this.currentPage = parseInt(page);\n      }\n\n      this.render();\n    });\n\n    this.paginationElement.innerHTML = '';\n    this.paginationElement.appendChild(pagination);\n  }\n\n  shouldShowPage(page, totalPages) {\n    // Show first page, last page, current page, and 2 pages around current\n    return page === 1 || page === totalPages || Math.abs(page - this.currentPage) <= 2;\n  }\n\n  renderInfo() {\n    const start = (this.currentPage - 1) * this.options.pageSize + 1;\n    const end = Math.min(start + this.options.pageSize - 1, this.filteredData.length);\n    const total = this.filteredData.length;\n\n    this.infoElement.textContent = `Showing ${start} to ${end} of ${total} entries`;\n  }\n\n  // Public API methods\n  refresh() {\n    this.extractData();\n    this.filteredData = [...this.data];\n    this.currentPage = 1;\n    this.render();\n  }\n\n  destroy() {\n    if (this.wrapper && this.wrapper.parentNode) {\n      this.wrapper.parentNode.insertBefore(this.table, this.wrapper);\n      this.wrapper.remove();\n    }\n  }\n}\n"],"names":["DataTable","table","options","rows","row","cells","cell","wrapper","e","header","index","query","columnIndex","a","b","aVal","bVal","aNum","bNum","comparison","tbody","startIndex","endIndex","pageData","totalPages","pagination","_","page","start","end","total"],"mappings":"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"}