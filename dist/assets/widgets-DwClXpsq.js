import{_ as o}from"./main-Dig8DsW_.js";class c{constructor(){this.widgets=new Map,this.charts=new Map,this.Chart=null,this.init()}async init(){console.log("Widget Manager initialized"),await this.loadChartJS(),this.initializeCounters(),await this.initializeWidgetCharts(),await this.initializeTrafficChart()}async loadChartJS(){try{const t=await o(()=>import("./chart-Xe2m7KUN.js"),[]);this.Chart=t.Chart,this.Chart.register(...t.registerables),console.log("Chart.js loaded successfully")}catch(t){throw console.error("Failed to load Chart.js:",t),t}}initializeCounters(){document.querySelectorAll(".count, .card-title").forEach(e=>{e.textContent.match(/^\d/)&&this.animateCounter(e)})}animateCounter(t){const e=parseInt(t.textContent.replace(/,/g,"")),r=e/(2e3/16);let i=0;const s=setInterval(()=>{i+=r,i>=e&&(i=e,clearInterval(s)),t.textContent=Math.floor(i).toLocaleString()},16)}async initializeWidgetCharts(){if(!this.Chart){console.warn("Chart.js not loaded, skipping widget charts");return}const t=document.querySelectorAll('[id^="widgetChart"]');console.log("Found ".concat(t.length," widget chart canvases")),t.forEach((e,a)=>{try{this.createWidgetChart(e,a+1)}catch(r){console.error("Failed to create widget chart ".concat(a+1,":"),r)}})}createWidgetChart(t,e){if(!t){console.warn("Widget chart canvas ".concat(e," not found"));return}const a=t.getContext("2d");if(!a){console.warn("Could not get context for widget chart ".concat(e));return}this.charts.has(t.id)&&this.charts.get(t.id).destroy();const r=this.generateWidgetChartData(e);console.log("Creating widget chart ".concat(e," with data:"),r);const i=new this.Chart(a,{type:"line",data:r,options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1},plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,grid:{display:!1}},y:{display:!1,grid:{display:!1}}},elements:{point:{radius:0,hoverRadius:0},line:{borderWidth:2,tension:.4}},animation:{duration:1e3}}});this.charts.set(t.id,i),console.log("Widget chart ".concat(e," created successfully"))}generateWidgetChartData(t){const e=[{data:[65,59,84,84,51,55,40,65,59,84]},{data:[28,48,40,59,86,27,90,28,48,40]},{data:[45,25,16,36,67,18,76,45,25,16]},{data:[12,19,27,43,52,31,48,12,19,27]}],a=e[t-1]||e[0];return{labels:Array(a.data.length).fill(""),datasets:[{data:a.data,borderColor:"rgba(255, 255, 255, 0.8)",backgroundColor:"rgba(255, 255, 255, 0.1)",fill:!1,pointRadius:0,pointHoverRadius:0}]}}async initializeTrafficChart(){const t=document.getElementById("trafficChart");if(!(!t||!this.Chart))try{const e=t.getContext("2d");this.charts.has("trafficChart")&&this.charts.get("trafficChart").destroy();const a=new this.Chart(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],datasets:[{label:"Visits",data:[65,59,84,84,51,55,40,58,72,69],borderColor:"#007bff",backgroundColor:"rgba(0, 123, 255, 0.1)",fill:!0,tension:.4,pointRadius:4,pointHoverRadius:6},{label:"Unique Visits",data:[28,48,40,59,86,27,90,45,62,58],borderColor:"#28a745",backgroundColor:"rgba(40, 167, 69, 0.1)",fill:!0,tension:.4,pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{display:!0,grid:{display:!1},ticks:{color:"#6c757d"}},y:{display:!0,grid:{color:"rgba(0,0,0,0.1)"},ticks:{color:"#6c757d"}}},elements:{line:{borderWidth:2}},interaction:{mode:"nearest",axis:"x",intersect:!1}}});this.charts.set("trafficChart",a),console.log("Traffic chart created successfully")}catch(e){console.error("Failed to initialize traffic chart:",e)}}handleResize(){this.charts.forEach(t=>{t&&typeof t.resize=="function"&&t.resize()})}destroy(){this.charts.forEach(t=>{t&&typeof t.destroy=="function"&&t.destroy()}),this.charts.clear(),this.widgets.clear()}}export{c as WidgetManager};
//# sourceMappingURL=widgets-DwClXpsq.js.map
