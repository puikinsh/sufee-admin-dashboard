class h{constructor(t,e={}){this.table=typeof t=="string"?document.querySelector(t):t,this.options={sortable:!0,searchable:!0,pagination:!0,pageSize:10,...e},this.data=[],this.filteredData=[],this.currentPage=1,this.sortColumn=null,this.sortDirection="asc",this.table&&this.init()}init(){this.extractData(),this.createWrapper(),this.createControls(),this.render(),this.setupEventListeners()}extractData(){const t=this.table.querySelectorAll("tbody tr");this.data=Array.from(t).map(e=>{const a=e.querySelectorAll("td");return Array.from(a).map(i=>i.innerHTML)}),this.filteredData=[...this.data]}createWrapper(){const t=document.createElement("div");t.className="datatable-wrapper",t.innerHTML='\n      <div class="datatable-top">\n        '.concat(this.options.searchable?'<div class="datatable-search"><input type="text" placeholder="Search..." class="form-control"></div>':"",'\n      </div>\n      <div class="datatable-container"></div>\n      ').concat(this.options.pagination?'<div class="datatable-bottom"><div class="datatable-info"></div><div class="datatable-pagination"></div></div>':"","\n    "),this.table.parentNode.insertBefore(t,this.table),t.querySelector(".datatable-container").appendChild(this.table),this.wrapper=t}createControls(){this.options.searchable&&(this.searchInput=this.wrapper.querySelector(".datatable-search input")),this.options.pagination&&(this.infoElement=this.wrapper.querySelector(".datatable-info"),this.paginationElement=this.wrapper.querySelector(".datatable-pagination"))}setupEventListeners(){this.searchInput&&this.searchInput.addEventListener("input",t=>{this.search(t.target.value)}),this.options.sortable&&this.table.querySelectorAll("thead th").forEach((e,a)=>{e.style.cursor="pointer",e.addEventListener("click",()=>{this.sort(a)})})}search(t){t?this.filteredData=this.data.filter(e=>e.some(a=>a.toLowerCase().includes(t.toLowerCase()))):this.filteredData=[...this.data],this.currentPage=1,this.render()}sort(t){this.sortColumn===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc"),this.filteredData.sort((e,a)=>{const i=e[t],s=a[t],r=parseFloat(i.replace(/[^0-9.-]/g,"")),o=parseFloat(s.replace(/[^0-9.-]/g,""));let n=0;return!isNaN(r)&&!isNaN(o)?n=r-o:n=i.localeCompare(s),this.sortDirection==="asc"?n:-n}),this.updateSortIndicators(),this.render()}updateSortIndicators(){this.table.querySelectorAll("thead th").forEach((e,a)=>{e.classList.remove("sort-asc","sort-desc"),a===this.sortColumn&&e.classList.add("sort-".concat(this.sortDirection))})}render(){this.renderTable(),this.options.pagination&&(this.renderPagination(),this.renderInfo())}renderTable(){const t=this.table.querySelector("tbody"),e=(this.currentPage-1)*this.options.pageSize,a=e+this.options.pageSize,i=this.options.pagination?this.filteredData.slice(e,a):this.filteredData;t.innerHTML=i.map(s=>"<tr>".concat(s.map(r=>"<td>".concat(r,"</td>")).join(""),"</tr>")).join("")}renderPagination(){const t=Math.ceil(this.filteredData.length/this.options.pageSize);if(t<=1){this.paginationElement.innerHTML="";return}const e=document.createElement("nav");e.innerHTML='\n      <ul class="pagination">\n        <li class="page-item '.concat(this.currentPage===1?"disabled":"",'">\n          <a class="page-link" href="#" data-page="prev">Previous</a>\n        </li>\n        ').concat(Array.from({length:t},(a,i)=>i+1).filter(a=>this.shouldShowPage(a,t)).map(a=>'\n            <li class="page-item '.concat(a===this.currentPage?"active":"",'">\n              <a class="page-link" href="#" data-page="').concat(a,'">').concat(a,"</a>\n            </li>\n          ")).join(""),'\n        <li class="page-item ').concat(this.currentPage===t?"disabled":"",'">\n          <a class="page-link" href="#" data-page="next">Next</a>\n        </li>\n      </ul>\n    '),e.addEventListener("click",a=>{a.preventDefault();const i=a.target.dataset.page;i==="prev"&&this.currentPage>1?this.currentPage--:i==="next"&&this.currentPage<t?this.currentPage++:isNaN(i)||(this.currentPage=parseInt(i)),this.render()}),this.paginationElement.innerHTML="",this.paginationElement.appendChild(e)}shouldShowPage(t,e){return t===1||t===e||Math.abs(t-this.currentPage)<=2}renderInfo(){const t=(this.currentPage-1)*this.options.pageSize+1,e=Math.min(t+this.options.pageSize-1,this.filteredData.length),a=this.filteredData.length;this.infoElement.textContent="Showing ".concat(t," to ").concat(e," of ").concat(a," entries")}refresh(){this.extractData(),this.filteredData=[...this.data],this.currentPage=1,this.render()}destroy(){this.wrapper&&this.wrapper.parentNode&&(this.wrapper.parentNode.insertBefore(this.table,this.wrapper),this.wrapper.remove())}}export{h as DataTable};
//# sourceMappingURL=datatable-Dxw1U61j.js.map
