# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Sufee is a responsive Bootstrap 5 Admin Dashboard Template built with HTML, CSS/SCSS, and JavaScript. Originally a Bootstrap 4 template, it has been completely modernized in v2.0 with Bootstrap 5, Vite build system, and a component-based architecture. It's a static front-end template with no backend components, designed for creating admin interfaces and dashboards.

### Version 2.0 Changes
- Migrated from Bootstrap 4 to Bootstrap 5
- Replaced Grunt/Bower with Vite/NPM
- Added dynamic partials system for code reusability
- Converted to ES6 modules
- Removed Internet Explorer support
- Fixed sidebar animations and navigation issues
- Improved performance with modern build tools

## Build System & Commands

This project uses Vite for build automation and development:

### Development Commands

- `npm run dev` - Starts the Vite development server with hot module replacement
- `npm run build` - Builds the project for production
- `npm run preview` - Previews the production build locally
- `npm run lint` - Placeholder for linting (not yet configured)
- `npm run typecheck` - Placeholder for TypeScript checking (not yet configured)

### Build Pipeline

1. **Development**: Vite dev server with HMR for instant updates
2. **SCSS Compilation**: Automatic SCSS compilation with modern-compiler API
3. **Module Resolution**: ES modules with optimized dependency pre-bundling
4. **Production Build**: Minification, tree-shaking, and code splitting
5. **Legacy Support**: Optional legacy browser support via @vitejs/plugin-legacy

### Dependency Management

All dependencies are now managed through NPM. The project has migrated from Bower/Grunt to Vite.
Key dependencies include Bootstrap 5, jQuery, Chart.js, DataTables, and various visualization libraries.

## Architecture & Structure

### Core Structure

- **Static HTML Templates**: Multiple HTML pages in src/ directory (index.html, ui-*.html) and root directory
- **SCSS Architecture**: Modular SCSS with partials in src/styles/
- **JavaScript Components**: Main entry point in src/main.js with modular components
- **Vendor Dependencies**: All managed through NPM and imported via Vite

### Key Directories

- `src/` - Source files including HTML templates, styles, and scripts
- `src/styles/` - SCSS source files with modular architecture
- `src/scripts/` - JavaScript modules and components
- `public/` - Static assets served directly (favicons, fonts, etc.)
- `dist/` - Production build output (generated by Vite)
- `images/` - Static images and assets

### SCSS Architecture

The main stylesheet (`src/styles/main.scss`) imports:

- `_variables.scss` - Theme variables and configuration
- `_gauge.scss` - Gauge chart styles
- `_switches.scss` - Toggle switch components
- `_widgets.scss` - Dashboard widget styles
- `_socials.scss` - Social media components

### Layout System

- **Left Panel**: Collapsible sidebar navigation (`aside.left-panel`)
- **Right Panel**: Main content area (`.right-panel`)
- **Header**: Top navigation with search and user menu
- **Responsive**: Mobile-first design with breakpoint-specific styles

### Key Libraries & Dependencies

- Bootstrap 5 (UI framework)
- jQuery (DOM manipulation for legacy components)
- Chart.js v4 (modern charting library)
- DataTables with Bootstrap 5 integration
- Font Awesome 6 (icons)
- Themify Icons (additional icons)
- Flag Icons (country flags)
- Various visualization libraries (Flot, Peity, JQVMap, GaugeJS)
- Form validation (jQuery Validation)
- Animation library (Animate.css)
- Select enhancement (Chosen.js)
- Maps integration (GMaps.js)

## Development Notes

### Working with Styles

- Always edit SCSS files in `src/styles/`, never directly edit compiled CSS
- Vite automatically compiles SCSS on save with HMR
- Source maps are included for debugging in development

### Adding New Components

- Follow existing patterns in the SCSS partial structure
- Use Bootstrap 5 classes and utilities
- Maintain the existing color scheme defined in `_variables.scss`
- Import new dependencies through NPM and configure in Vite

### JavaScript Integration

- Main entry point is `src/main.js` which imports all dependencies
- Component scripts are in `src/scripts/`
- All vendor libraries are imported as ES modules
- jQuery plugins are made available globally after import

### Browser Support

- CSS is post-processed for compatibility with last 4 versions of major browsers
- IE support has been removed as Internet Explorer was discontinued in 2022
- The `<meta http-equiv="X-UA-Compatible" content="IE=edge">` tag should not be used in any HTML files

This is a front-end only template - no server-side components or API integrations are included.

## Partials System (New)

The template now includes a modern partials system for reusable components, eliminating code duplication across HTML files.

### Key Features

- **Dynamic HTML Loading**: Common components are loaded at runtime
- **Cache System**: Partials are cached after first load for performance
- **Active State Management**: Automatic sidebar navigation highlighting
- **Breadcrumb System**: Dynamic breadcrumb generation
- **Bootstrap 5 Integration**: Full Bootstrap 5 compatibility

### Core Partials

#### Available Partials

- `head-common.html` - Common meta tags, fonts, and favicon
- `sidebar.html` - Left navigation sidebar with menu items
- `header.html` - Top navigation with search, notifications, and user menu
- `scripts-common.html` - Common JavaScript imports

#### Using Partials in HTML Files

Add these data attributes to div elements where you want partials to load:

```html
<!-- Load common head elements -->
<div data-partial="head-common"></div>

<!-- Load and replace with sidebar -->
<div data-partial="sidebar" data-partial-replace="true"></div>

<!-- Load and replace with header -->
<div data-partial="header" data-partial-replace="true"></div>

<!-- Dynamic breadcrumbs -->
<div data-breadcrumb data-breadcrumb-title="Page Title" data-breadcrumb-path="Parent|Child|Current"></div>
```

#### Data Attributes

- `data-partial="name"` - Specifies which partial to load
- `data-partial-replace="true"` - Replaces the div entirely (default: false, appends content)
- `data-breadcrumb` - Generates dynamic breadcrumbs
- `data-breadcrumb-title` - Page title for breadcrumbs
- `data-breadcrumb-path` - Breadcrumb path separated by |
- `data-page="page-name"` - Used for sidebar active state highlighting

### Partials Architecture

#### Directory Structure

```
src/
├── partials/
│   ├── head-common.html      # Common head elements
│   ├── sidebar.html          # Navigation sidebar
│   ├── header.html           # Top header
│   └── scripts-common.html   # Common scripts
├── scripts/
│   ├── partials-loader.js    # Main partials loading system
│   └── breadcrumb-helper.js  # Breadcrumb generation
└── main.js                   # Entry point with partials initialization
```

#### Partials Loader System

The `partials-loader.js` module provides:

- **PartialsLoader Class**: Main loader with caching
- **loadPartial(name)**: Loads individual partials with cache
- **loadAllPartials()**: Processes all `data-partial` elements
- **initializeSidebarActiveState()**: Highlights active menu items
- **initializeHeader()**: Sets up header functionality

#### Integration in main.js

```javascript
import { partialsLoader } from './scripts/partials-loader.js'

// Initialize partials system
partialsLoader.loadAllPartials()
partialsLoader.initializeSidebarActiveState()
partialsLoader.initializeHeader()
```

### Creating New Partials

1. **Create the partial file** in `src/partials/filename.html`
2. **Add to HTML** using `<div data-partial="filename"></div>`
3. **No code changes needed** - the system auto-discovers new partials

### Sidebar Active States

The system automatically highlights active menu items based on the `data-page` attribute on the body element:

```html
<body class="sufee-dashboard" data-page="ui-buttons">
```

Sidebar menu items with matching `data-page` attributes receive the `active` class.

### Benefits

- **No Code Duplication**: Write header/sidebar once, use everywhere
- **Easy Maintenance**: Update one file to change all pages
- **Performance**: Cached loading after first request
- **Bootstrap 5 Compatible**: Modern Bootstrap 5 components
- **SEO Friendly**: Proper semantic HTML structure
- **IE Support Removed**: Modernized codebase without legacy IE compatibility

### Migration from Old System

All HTML files in `src/` have been updated to use the partials system. The old inline header/sidebar code has been replaced with data attributes for dynamic loading.
